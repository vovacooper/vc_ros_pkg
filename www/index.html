<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="eventemitter2.min.js"></script>
  <script type="text/javascript" src="roslib.min.js"></script>
  <script type="text/javascript" src="vc_ros.js"></script>
  
  <script src="virtualjoystick.js"></script>

  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/> <!--320-->
<body>
 
<table class="table" style="width:20%;height50%">
  <tr>
    <td> </td>
    <td><button id="Up" class="button" onclick="upFunction(this)">Up </button></td> 
    <td> </td>
  </tr>
  <tr>
    <td><button id="Left" class="button" onclick="upFunction(this)">Left</button></td>
    <td><button id="Down" class="button" onclick="upFunction(this)">Down</button></td> 
    <td><button id="Right" class="button" onclick="upFunction(this)">Right</button></td>
  </tr>
</table>

  <p id="demo"></p>
  <p id="kp"></p>
  <p id="kc"></p>
  <p id="status"></p>
  
  <div id="container"></div>
  <span id="result"></span>

 <script>
     x=$("p").position();
    alert("Top: " + x.top + " Left: " + x.left);

      console.log("touchscreen is", VirtualJoystick.touchScreenAvailable() ? "available" : "not available");
  
      var joystick  = new VirtualJoystick({
        container : document.getElementById('container'),
        mouseSupport  : true,
        container_pos : { x: x.left , y: x.top},
        limitStickTravel: true,
      });
      joystick.addEventListener('touchStart', function(){
        console.log('down')
      })
      joystick.addEventListener('touchEnd', function(){
        console.log('up')
      })
      setInterval(function(){
        var outputEl  = document.getElementById('result');
        outputEl.innerHTML  = '<b>Result:</b> '
          + ' dx:' + joystick.deltaX()
          + ' dy:' + joystick.deltaY()
          + (joystick.right() ? ' right'  : '')
          + (joystick.up()    ? ' up'   : '')
          + (joystick.left()  ? ' left' : '')
          + (joystick.down()  ? ' down'   : '') 
      }, 1/30 * 1000);
    </script>

</body>
</html>
